<nav class="header-nav">
  <a class="header-nav__logo" href="{{site.baseurl}}/">
    <img src="{{site.baseurl}}/assets/images/common/kobotoolbox_logo_default_for-light-bg.svg"/>
  </a>

  {% comment %}
  A pair of elements responsible for handling css-only mobile menu.
  {% endcomment %}
  <input type="checkbox" id="mobile-nav-trigger">
  <label class="header-nav__mobile-nav-trigger" for="mobile-nav-trigger">
    {% for i in (1..4) %}<i></i>{% endfor %}
  </label>

  <ul class="header-nav__menu">
    {% for item in site.data.header-menu %}
      {% comment %}
      We need to compare the parentest directory.
      {% endcomment %}
      {% assign page_dir_split = page.url | split:"/" %}
      {% assign page_dir = page_dir_split[1] %}
      {% assign item_path_split = item.path | split:"/" %}
      {% assign item_dir = item_path_split[1] %}
      <li>
        <a
          class="header-nav__menu-item {% if page_dir == item_dir %}header-nav__menu-item--active{% endif %}"
          href="{{site.baseurl}}{{item.path}}"
          >{{item.label}}</a
        >
      </li>
    {% endfor %}
  </ul>

  <ul class="header-nav__buttons">
    {% capture sign_up_url %}{{site.baseurl}}/sign-up{% endcapture %}
    {% capture donate_url %}{{site.baseurl}}/donate{% endcapture %}
    <li>{% include components/button.liquid size="m" type="frame" color="blue" label="Sign up" url=sign_up_url %}</li>
    <li>{% include components/button.liquid size="m" type="full" color="blue" label="Donate" url=donate_url %}</li>
  </ul>
</nav>
